@model smartHookah.Models.TobaccoReview

@{
    Layout = null;
}

@Scripts.Render("~/bundles/controll")
<style>
    .noUi-horizontal .noUi-tooltip {
      
        left: 200%;
        bottom: 0;
        }
</style>
<div class="modal fade" id="tobacoReviewModal">
    <div class="modal-dialog" role="dialog">
        @using (Ajax.BeginForm("CreateFromModal", "SmokeSession",
                        new AjaxOptions
                        {
                            Url = Url.Action("CreateFromModal", "TobaccoReviews"),
                            HttpMethod = "POST",
                            OnSuccess = "SaveReviewSuccess"
                        }, new { @id = "SaveReviewForms" }))
        {
            @Html.AntiForgeryToken()
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title">Write new session review</h4>
                </div>
                <div class="modal-body">
                    @Html.HiddenFor(m => m.SmokeSessionId)
                    <input type="hidden" name="id" value="@Model.Id"/>
                   <label for="smokeQuality">@Smoke.SmokeSession.smokeQuality</label>
                    <div class="reviewSlider" id="smokeQuality" data-input="smokeHidden">
                        <input type="hidden" name="smoke" id="smokeHidden" value="@Model.Smoke"/>
                    </div>
                    <hr />
                    <label for="taste">@Smoke.SmokeSession.tobaccoTaste</label>
                    <div class="reviewSlider" id="taste" data-input="tasteHidden">
                        <input type="hidden" name="taste" id="tasteHidden" value="@Model.Taste"/>
                    </div>
                    <hr />
                    <label for="quality">@Smoke.SmokeSession.tobaccoQuality</label>
                    <div class="reviewSlider" id="quality" data-input="qualityHidden">
                        <input type="hidden" name="quality" id="qualityHidden" value="@Model.Quality"/>
                    </div>
                    <hr />
                    <label for="overall">@Smoke.SmokeSession.overallRating</label>
      
                    <div class="reviewSlider" id="overall" data-input="overallHidden">
                        <input type="hidden" name="overall" id="overallHidden" value="@Model.Overall"/>
                    </div>
                    <hr />
                    <div class="input-group">
                        <textarea  class="form-control" rows="4" cols="50" name="text" id="text"  placeholder="@Smoke.SmokeSession.writeTobaccoReview">@Model.Text</textarea>
                    </div>
                    <hr />
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">@Smoke.SmokeSession.close</button>
                    <button type="submit" class="btn btn-primary">@Smoke.SmokeSession.saveChanges</button>
                </div>
            </div>


            <!-- /.modal-content -->
        }
    </div>
    <!-- /.modal-dialog -->
    
</div>

<script>

    $(function() {
        $('.reviewSlider').each(function() {
            var inputId = $(this).data('input');
            var $input = $(`#${inputId}`);
            var value = $input.val();
            console.log(value);
            noUiSlider.create(this,
                {
                    start: [value],
                    step: 1,
                    tooltips: [true],
                    range: {
                        'min': [0],
                        'max': [10]
                    }
                });

            this.noUiSlider.on('update', function( values, handle ) {

                var sliderValue = values[handle];

                $input.val(Math.round(sliderValue));
            });
        });
    })
</script>

